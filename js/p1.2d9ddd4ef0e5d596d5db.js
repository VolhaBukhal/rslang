(()=>{"use strict";var e={296:(e,t,n)=>{n.r(t)},303:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(296),(0,i(n(793)).default)()},898:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(939),s=n(323),a=o(n(716)),d=n(452);t.default=class{constructor(e,t,n="0",i="0"){this.page=i,this.grade=n,this.words=[],this.container=document.querySelector(".dictionary__row"),this.isComplicated=t}getData(){return i(this,void 0,void 0,(function*(){if(!0===this.isComplicated){const e="aggregatedWords?wordsPerPage=3600&filter=%7B%22userWord.difficulty%22%3A%22hard%22%7D";this.words=(yield(0,d.getAggregatedWords)(localStorage.getItem("token")||"",`${r.ELinks.users}/${localStorage.getItem("userId")}/${e}`))[0].paginatedResults}else this.words=yield(0,d.getWords)(this.grade,this.page)}))}render(){this.container.innerHTML="",this.words.map((e=>{const t=new a.default(e,s.store.isAuthorized,this.isComplicated);t.render(this.container),t.bindListener()}))}}},716:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(939),s=n(452),a=n(419),d=o(n(86)),l=n(8),c=n(323);t.default=class{constructor(e,t,n){this.element=document.createElement("div"),this.hardWordsBtn=document.querySelector(".dictionary-levels button:last-child"),this.wordStatisticsInGames=document.querySelector(".word-statistics-in-games"),this.wordStatisticsHeaderWord=document.querySelector(".word-statistics-header p"),this.audioCallRight=document.getElementById("audiocall-right"),this.audioCallWrong=document.getElementById("audiocall-wrong"),this.sprintRight=document.getElementById("sprint-right"),this.sprintWrong=document.getElementById("sprint-wrong"),this.audioArr=[],this.playSound=()=>i(this,void 0,void 0,(function*(){const e=[`https://bukman-rs-lang.herokuapp.com/${this.word.audio}`,`https://bukman-rs-lang.herokuapp.com/${this.word.audioMeaning}`,`https://bukman-rs-lang.herokuapp.com/${this.word.audioExample}`];0===this.audioArr.length||this.audioArr[0].src!==e[0]?this.audioArr=e.map((e=>new Audio(e))):this.audioArr.forEach((e=>{e.currentTime=0,e.pause()}));for(const e of this.audioArr){e.play();try{yield new Promise(((t,n)=>{e.addEventListener("ended",(()=>{n()})),e.addEventListener("error",(e=>{t(e)}))}))}catch(e){console.log(e)}}})),this.setCardDifficalty=e=>i(this,void 0,void 0,(function*(){const t=e.target.dataset.difficalty,n=this.element.classList.contains("active-hard"),i=this.element.classList.contains("active-easy"),o=(yield(0,s.getAggregatedWordById)(localStorage.getItem("userId")||"",this.word.id||this.word._id,localStorage.getItem("token")||""))[0].userWord;if(t===r.WordDifficulty.hard&&(this.element.classList.toggle("active-hard"),this.isComplicated?(yield(0,s.deleteUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,localStorage.getItem("token")||""),(0,a.renderDictionary)(this.isComplicated)):(i&&this.element.classList.remove("active-easy"),n?o?yield(0,s.updateUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:r.WordDifficulty.empty,optional:o.optional},localStorage.getItem("token")||""):yield(0,s.deleteUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,localStorage.getItem("token")||""):o?yield(0,s.updateUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:"hard",optional:o.optional},localStorage.getItem("token")||""):yield(0,s.createUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:"hard",optional:c.store.optional},localStorage.getItem("token")||""),yield(0,d.default)())),t===r.WordDifficulty.easy&&(this.element.classList.toggle("active-easy"),n&&this.element.classList.remove("active-hard"),i?o?yield(0,s.updateUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:r.WordDifficulty.empty,optional:o.optional},localStorage.getItem("token")||""):yield(0,s.deleteUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,localStorage.getItem("token")||""):o?yield(0,s.updateUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:"easy",optional:o.optional},localStorage.getItem("token")||""):yield(0,s.createUserWord)(localStorage.getItem("userId")||"",this.word.id||this.word._id,{difficulty:"easy",optional:c.store.optional},localStorage.getItem("token")||""),yield(0,d.default)()),t===r.WordDifficulty.statistics){const e=yield(0,l.getWordStatisticsInGame)(this.word.id||this.word._id);e&&(this.audioCallRight.innerHTML=e.optional.games.audiocall.right.toString(),this.audioCallWrong.innerHTML=e.optional.games.audiocall.wrong.toString(),this.sprintRight.innerHTML=e.optional.games.sprint.right.toString(),this.sprintWrong.innerHTML=e.optional.games.sprint.wrong.toString()),this.wordStatisticsHeaderWord.innerHTML=this.word.word,this.wordStatisticsInGames.classList.remove("hidden")}})),this.word=e,this.isAuthorized=t,this.isComplicated=n,this.audioArr=[]}bindListener(){this.element.querySelector(".word-transcription-sound").addEventListener("click",this.playSound),this.element.querySelectorAll(".word-contrals-item").forEach((e=>e.addEventListener("click",this.setCardDifficalty)))}render(e){const t=document.createElement("div");let n;t.classList.add("dictionary-card");this.hardWordsBtn.classList.contains("hidden")||(()=>{i(this,void 0,void 0,(function*(){var e;n=null===(e=(yield(0,s.getAggregatedWordById)(localStorage.getItem("userId")||"",this.word.id||this.word._id,localStorage.getItem("token")||""))[0].userWord)||void 0===e?void 0:e.difficulty,n&&n!==r.WordDifficulty.empty&&" "!==n&&t.classList.add(`active-${n}`)}))})(),t.innerHTML=`\n    <div class="dictionary-card_left">\n      <img src="https://bukman-rs-lang.herokuapp.com/${this.word.image}" alt="word image">\n    </div>\n    <div class="dictionary-card_right">\n      <div class="word-name">\n        <p><strong>${this.word.word}</strong></p>\n          <div class="word-contrals ${this.isAuthorized?"":"hidden"}">\n              <button class="word-contrals-item hard" data-difficalty="hard" title="Сложное слово">\n                <svg  width="24" height="24" viewBox="0 0 24 24" fill="none" data-difficalty="hard"\n                 xmlns="http://www.w3.org/2000/svg">\n                  <path data-difficalty="hard"\n                  d="M23 5.5V20C23 22.2 21.2 24 19 24H11.7C10.62 24 9.6 23.57 8.85 22.81L1 14.83C1 14.83\n                  2.26 13.6 2.3 13.58C2.52 13.39 2.79 13.29 3.09 13.29C3.31 13.29 3.51 13.35 3.69 13.45C3.73 13.46\n                  8 15.91 8 15.91V4C8 3.17 8.67 2.5 9.5 2.5C10.33 2.5 11 3.17 11 4V11H12V1.5C12 0.67 12.67 0 13.5\n                    0C14.33 0 15 0.67 15 1.5V11H16V2.5C16 1.67 16.67 1 17.5 1C18.33 1 19 1.67 19 2.5V11H20V5.5C20\n                    4.67 20.67 4 21.5 4C22.33 4 23 4.67 23 5.5Z" fill="white"/>\n                </svg>\n              </button>\n              <button class="word-contrals-item easy ${this.isComplicated?"hidden":""}" data-difficalty="easy" title="Изученное слово">\n                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" data-difficalty="easy"\n                 xmlns="http://www.w3.org/2000/svg">\n                  <path data-difficalty="easy"\n                  d="M20.7375 9.475L12.5 17.7125L8.0125 13.2375L6.25 15L12.5 21.25L22.5 11.25L20.7375 9.475ZM15\n                  2.5C8.1 2.5 2.5 8.1 2.5 15C2.5 21.9 8.1 27.5 15 27.5C21.9 27.5 27.5 21.9 27.5 15C27.5 8.1 21.9 2.5\n                    15 2.5ZM15 25C9.475 25 5 20.525 5 15C5 9.475 9.475 5 15 5C20.525 5 25 9.475 25 15C25 20.525 20.525\n                    25 15 25Z" fill="white"/>\n                </svg>\n              </button>\n              <button class="word-contrals-item" data-difficalty="statistics" title="Статистика в играх">\n              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-difficalty="statistics" xmlns="http://www.w3.org/2000/svg">\n              <path d="M9 24H15V0H9V24ZM0 24H6V12H0V24ZM18 7.5V24H24V7.5H18Z" fill="white" data-difficalty="statistics"/>\n              </svg>\n            </button>\n            </div>\n      </div>\n      <div class="word-translation">${this.word.wordTranslate}</div>\n      <div class="word-transcription"> ${this.word.transcription} <span class="word-transcription-sound">\n        <audio src="https://bukman-rs-lang.herokuapp.com/${this.word.audio}" ></audio>\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M3 8.99998V15H7L12 20V3.99998L7 8.99998H3ZM16.5 12C16.5 10.23 15.48 8.70998 14 7.96998V16.02C15.48\n           15.29 16.5 13.77 16.5 12ZM14 3.22998V5.28998C16.89 6.14998 19 8.82998 19 12C19 15.17 16.89 17.85 14\n            18.71V20.77C18.01 19.86 21 16.28 21 12C21 7.71998 18.01 4.13998 14 3.22998Z" fill="white"/>\n        </svg>\n      </span> </div>\n      <div class="word-mining">${this.word.textMeaning}</div>\n      <div class="word-mining-transcription">${this.word.textMeaningTranslate}</div>\n      <hr>\n      <div class="word-example">${this.word.textExample}</div>\n      <div class="word-example-transcription">${this.word.textExampleTranslate}</div>\n    </div>`,e.appendChild(t),this.element=t}}},793:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(979)),s=o(n(161)),a=o(n(255)),d=n(323),l=n(419),c=o(n(634)),u=n(724),h=n(8),g=n(939),m=n(129);t.default=function(){return i(this,void 0,void 0,(function*(){const e=document.querySelectorAll(".words-level"),t=document.querySelector("#next-page"),n=document.querySelector("#prev-page"),i=document.querySelector("#current-page"),o=document.querySelector(".dictionary-controls");(0,r.default)(),(0,s.default)(),(0,l.renderDictionary)(),e.forEach((t=>t.addEventListener("click",(t=>{d.store.isComplicatedWordPage=!1,d.store.currentLevel=t.target.dataset.level||"0",console.log("current btn level",t.target.dataset.level),d.store.currentPage="0",i.textContent=String(+d.store.currentPage+1),e.forEach((e=>e.classList.remove("active"))),t.target.classList.add("active"),(0,l.renderDictionary)(),o.classList.remove("hidden")})))),t.addEventListener("click",(()=>{+d.store.currentPage<29?d.store.currentPage=String(+d.store.currentPage+1):d.store.currentPage="29",i.textContent=String(+d.store.currentPage+1),(0,l.renderDictionary)()})),n.addEventListener("click",(()=>{+d.store.currentPage>0?d.store.currentPage=String(+d.store.currentPage-1):d.store.currentPage="0",i.innerHTML=String(+d.store.currentPage+1),(0,l.renderDictionary)()})),(0,a.default)(),(0,c.default)();const f=document.querySelectorAll(".audiocall-level"),p=document.querySelector(".audiocall-btn"),v=document.querySelector(".game-audio");f.forEach((e=>e.addEventListener("click",u.setCurrentLevel))),null==p||p.addEventListener("click",(()=>{(0,u.startAudioCallGame)(g.CallAudiogameFrom.menu)})),null==v||v.addEventListener("click",(()=>{(0,u.startAudioCallGame)(g.CallAudiogameFrom.dictionary)})),(0,h.navigateWordStatistics)(),(0,m.navigateStatistics)()}))}},964:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(592);t.default=class{constructor(e,t){this.questionWordEl=document.querySelector("#question-word"),this.questionImg=document.querySelector(".audiocall-question__img"),this.element=document.createElement("div"),this.getAnswersArr=()=>{if(this.words.length>=5)for(this.answersArr=[this.correctAnswer];this.answersArr.length<5;){const e=this.words[Math.floor(Math.random()*this.words.length)].wordTranslate;this.answersArr.includes(e)||this.answersArr.push(e)}return(0,o.shuffle)(this.answersArr)},this.bindListener=()=>i(this,void 0,void 0,(function*(){const e=this.element.querySelector(".audiocall-question__sound-btn"),t=null==e?void 0:e.querySelector("audio");null==t||t.load(),(0,o.playAudio)(t),null==e||e.addEventListener("click",(()=>(0,o.playAudio)(t)))})),this.generateAnwersArr=()=>{let e="";return this.answersArr.forEach(((t,n)=>{e+=`<div class="btn answer-item" id="answer-${n}">${t}</div>`})),e},this.word=e,this.correctAnswer=e.wordTranslate,this.sound=e.audio,this.wordTranslate=e.wordTranslate,this.isCorrect=!1,this.words=t,this.answersArr=this.getAnswersArr(),this.audio=new Audio,this.quizElement=document.querySelector(".audiocall-question")}answer(e){return this.isCorrect=e===this.correctAnswer||!1}render(e){const t=document.createElement("div");t.classList.add("audiocall-question__info"),t.classList.add("hidden");const n=`\n      <img src="https://bukman-rs-lang.herokuapp.com/${this.word.image}" alt="answer image" class="audiocall-question__img info-item">\n      <div class="info-item center">\n        <div class="audiocall-question__sound-btn">\n        <audio src="https://bukman-rs-lang.herokuapp.com/${this.word.audio}" ></audio>\n        </div>\n        <div class="audiocall-question__word" id="question-word">${this.word.word}</div>\n      </div>\n      <div class="info-item"></div>\n    `;t.innerHTML=n;const i=document.createElement("div");i.classList.add("audiocall-question__answers");const o=`\n      ${this.generateAnwersArr()}\n    `;i.innerHTML=o,e.appendChild(t),e.appendChild(i),this.element=t}}},418:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(592),r=i(n(964)),s=i(n(368)),a=n(8),d=n(323);t.default=class{constructor(e){this.quizElement=document.querySelector(".audiocall-question"),this.quizChangableEl=document.querySelector(".audiocall-question__changable"),this.nextBtn=document.querySelector(".audiocall-question__next-btn"),this.exitGame=document.querySelector(".audiocall-question__settings_exit"),this.exitOnNavAudioLinks=document.querySelector(".game-menu_audiocall"),this.volumeBtn=document.querySelector(".audiocall-question__settings_volume"),this.toogleVolume=()=>{this.volume=!this.volume,this.volumeBtn.classList.toggle("mute")},this.getAnswerWord=e=>{this.currentAnswer=e.target.textContent,this.currentAnswer&&(this.showResult(),this.answeredAmount++)},this.styleAnswer=()=>{const e=document.querySelectorAll(".answer-item"),t=document.querySelector(".audiocall-question__info");document.querySelectorAll(".dot")[this.answeredAmount].classList.add("active"),e.forEach((e=>{const t=this.questions[this.answeredAmount].correctAnswer===e.textContent;e.textContent===this.currentAnswer&&t?e.classList.add("correct"):e.textContent!==this.currentAnswer||t?e.textContent===this.questions[this.answeredAmount].correctAnswer?e.classList.add("correct"):(e.classList.add("disable"),e.setAttribute("disabled","true")):e.classList.add("wrong")})),null==t||t.classList.remove("hidden")},this.setQuestions=e=>e.map((t=>new r.default(t,e))),this.renderQuestion=()=>{this.quizChangableEl.innerHTML="",this.questions[this.answeredAmount].render(this.quizChangableEl),this.questions[this.answeredAmount].bindListener(),this.bindListener()},this.nextQuestion=()=>{const e=document.querySelector(".audiocall-question__info");if(null==e||e.classList.add("hidden"),this.answeredAmount<this.totalAmount)this.currentAnswer="",this.renderQuestion();else if(this.endQuiz(),this.volume){const e=new Audio;e.src="./assets/sounds/roundEnd.mp3",e.play()}},this.showResult=()=>{this.currentAnswer&&(this.questions[this.answeredAmount].answer(this.currentAnswer)?(this.totalCorrectWords.push(this.questions[this.answeredAmount]),this.styleAnswer(),d.store.isAuthorized&&(0,a.updateGameStats)("audiocall",!0,this.questions[this.answeredAmount].word.id||this.questions[this.answeredAmount].word._id),this.volume&&(0,o.playSound)(!0)):(this.totalWrongWords.push(this.questions[this.answeredAmount]),this.styleAnswer(),d.store.isAuthorized&&(0,a.updateGameStats)("audiocall",!1,this.questions[this.answeredAmount].word.id||this.questions[this.answeredAmount].word._id),this.volume&&(0,o.playSound)(!1)))},this.totalAmount=e.length,this.answeredAmount=0,this.questions=this.setQuestions(e),this.totalWrongWords=[],this.totalCorrectWords=[],this.currentAnswer="",this.volume=!0,this.audiocallAnswerBtns=document.querySelectorAll(".answer-item"),this.nextBtn.addEventListener("click",this.nextQuestion),this.renderQuestion(),(0,o.pagination)(this.totalAmount),this.exitOnNavAudioLinks.addEventListener("click",this.closeQuiz.bind(this)),this.volumeBtn.addEventListener("click",this.toogleVolume)}closeQuiz(){const e=document.querySelector(".audiocall-question__pagination");this.quizElement.classList.add("hidden"),e.innerHTML="",this.volumeBtn.classList.remove("mute"),this.removeListener()}navigateBackToWelcomAudioCall(){const e=document.querySelector(".audiocall"),t=document.querySelector(".audiocall-welcome");null==e||e.classList.remove("hidden"),null==t||t.classList.remove("hidden")}bindListener(){this.audiocallAnswerBtns=document.querySelectorAll(".answer-item"),this.audiocallAnswerBtns.forEach((e=>e.addEventListener("click",this.getAnswerWord)))}removeListener(){this.nextBtn.removeEventListener("click",this.nextQuestion),this.volumeBtn.removeEventListener("click",this.toogleVolume)}endQuiz(){const e=document.querySelector(".audiocall-result"),t=new s.default(this.totalWrongWords,this.totalCorrectWords);t.mount(e),t.bindListener(),this.quizElement.classList.add("hidden"),null==e||e.classList.remove("hidden"),this.volumeBtn.classList.remove("mute"),this.removeListener()}}},368:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(939),o=n(419),r=n(592);t.default=class{constructor(e,t){this.wrongAnswers=e,this.correctAnswers=t,this.element=document.createElement("div")}generateWordArr(e){let t="";return e.forEach((e=>{t+=`\n      <li class="result-item">\n          <div class="audiocall-result__sound-btn">\n            <audio src="https://bukman-rs-lang.herokuapp.com/${e.word.audio}" ></audio>\n          </div>\n          <div class="audiocall-result__word">${e.word.word}</div>\n          <div class="audiocall-result__word_translation"> <span> — </span>${e.wordTranslate}</div>\n        </li>\n      `})),t}generateCongratulation(e){const t=this.wrongAnswers.length+this.correctAnswers.length,n=Math.round(e/t*100),o=n===i.ResultGrade.excellent,r=n<i.ResultGrade.excellent&&n>i.ResultGrade.good,s=n<i.ResultGrade.good&&n>i.ResultGrade.bad;return o?"Превосходный результат, поздравляем!":r?"Хороший результат, поздравляем!":s?"Неплохо, однако возможно лучше :)!":"Не отчаивайтесь, все обязательно получится!"}closeResult(){document.querySelector(".audiocall-result").classList.add("hidden"),(0,r.navigateToAudiocallStart)()}bindListener(){const e=this.element.querySelectorAll(".audiocall-result__sound-btn"),t=this.element.querySelector(".close-result"),n=this.element.querySelector(".audiocall-result_play-again"),i=this.element.querySelector(".audiocall-result_back-dictionary");e.forEach((e=>e.addEventListener("click",(e=>{const t=(null==e?void 0:e.target).querySelector("audio");null==t||t.play()})))),null==t||t.addEventListener("click",this.closeResult),null==t||t.addEventListener("click",r.navigateToAudiocallStart),null==n||n.addEventListener("click",r.navigateToAudiocallStart),null==i||i.addEventListener("click",r.navigateBackToDictionary),null==i||i.addEventListener("click",(()=>(0,o.renderDictionary)()))}generate(){return`\n    <div class="close-result">X</div>\n      <h2 class="audiocall-result__title">${this.generateCongratulation(this.correctAnswers.length)}</h2>\n      <div class="audiocall-result__wrong">\n        <div class="audiocall-result__subheader">\n          <h3 class="audiocall-result__subtitle">Не знаю</h3>\n          <div class="answer-amount wrong-amount">${this.wrongAnswers.length}</div>\n        </div>\n        ${this.generateWordArr(this.wrongAnswers)}\n      </div>\n      <div class="audiocall-result__correct">\n        <div class="audiocall-result__subheader">\n          <h3 class="audiocall-result__subtitle">Знаю</h3>\n          <div class="answer-amount correct-amount">${this.correctAnswers.length}</div>\n        </div>\n        ${this.generateWordArr(this.correctAnswers)}\n      </div>\n      <div class="audiocall-result__navigation">\n          <button class="btn audiocall-result_play-again btn-result-nav">Сыграть еще раз</button>\n          <button class="btn audiocall-result_back-dictionary btn-result-nav">Вернуться в учебник</button>\n      </div>\n    `}mount(e){e.innerHTML=this.generate(),this.element=e}}},724:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.startAudioCallGame=t.setCurrentLevel=void 0;const r=n(323),s=n(452),a=n(939),d=o(n(418)),l=n(592),c=n(419),u=document.querySelectorAll(".audiocall-level"),h=document.querySelector(".audiocall-welcome"),g=document.querySelector(".audiocall-question"),m=document.querySelector(".close-result"),f=document.querySelector(".audiocall-result"),p=document.querySelector(".audiocall-question__settings_exit"),v=document.querySelector(".audiocall-question__changable"),y=document.querySelector(".header__logo_link"),w=document.querySelectorAll(".header__nav_list-item");t.setCurrentLevel=function(e){r.store.audiocallCurrentLevel=e.target.dataset.level||"0",u.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active")},t.startAudioCallGame=function(e){let t=null;function n(){null==t||t.removeListener(),null==t||t.closeQuiz(),t=null}null==h||h.classList.add("hidden"),null==g||g.classList.remove("hidden"),e===a.CallAudiogameFrom.menu?function(){i(this,void 0,void 0,(function*(){const e=yield(0,s.getWords)(r.store.audiocallCurrentLevel,String(Math.floor(30*Math.random())));console.log("words start from nav",e),t=new d.default(e),t.bindListener()}))}():e===a.CallAudiogameFrom.dictionary&&function(){i(this,void 0,void 0,(function*(){let e;if(r.store.isAuthorized)if(r.store.isComplicatedWordPage){const t="aggregatedWords?wordsPerPage=3600&filter=%7B%22userWord.difficulty%22%3A%22hard%22%7D",n=`${a.ELinks.users}/${localStorage.getItem("userId")}/${t}`;e=(yield(0,s.getAggregatedWords)(localStorage.getItem("token")||"",n))[0].paginatedResults}else{const t=`wordsPerPage=20&filter=%7B%22%24and%22%3A%5B%7B%22%24or%22%3A%5B%7B%22userWord.difficulty%22%3A%22empty%22%7D%2C%20%7B%22userWord.difficulty%22%3A%22hard%22%7D%2C%20%7B%22userWord%22%3Anull\n        %7D%5D%7D%2C%20%7B%22page%22%3A${r.store.currentPage}%7D%5D%7D`,n=`${a.ELinks.users}/${localStorage.getItem("userId")}/aggregatedWords?group=${r.store.currentLevel}&${t}`;e=(yield(0,s.getAggregatedWords)(localStorage.getItem("token")||"",n))[0].paginatedResults}else e=yield(0,s.getWords)(r.store.currentLevel,r.store.currentPage);e.length>=5?(t=new d.default(e),t.bindListener()):((0,l.navigateBackToDictionary)(),alert("Недостаточно слов для игры"))}))}(),null==m||m.addEventListener("click",(()=>{null==f||f.classList.add("hidden"),t=null})),p.addEventListener("click",(()=>{n(),e===a.CallAudiogameFrom.menu?(0,l.navigateToAudiocallStart)():e===a.CallAudiogameFrom.dictionary&&((0,l.navigateBackToDictionary)(),(0,c.renderDictionary)()),v.innerHTML=""})),y.addEventListener("click",n),w.forEach((e=>e.addEventListener("click",n)))}},592:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.navigateBackToDictionary=t.navigateToAudiocallStart=t.playAudio=t.pagination=t.playSound=t.shuffle=void 0,t.shuffle=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},t.playSound=function(e){const t=new Audio;t.src=e?"./assets/sounds/correct.mp3":"./assets/sounds/wrong1.wav",t.play()},t.pagination=function(e){const t=document.querySelector(".audiocall-question__pagination"),n=null==t?void 0:t.getBoundingClientRect().width;t.innerHTML="";for(let i=0;i<e;i+=1){const i=document.createElement("div");if(i.classList.add("dot"),n){const t=Math.round(n/e);i.style.width=`${t}px`}null==t||t.appendChild(i)}},t.playAudio=function(e){const t=null==e?void 0:e.play();null!==t&&(null==t||t.catch((()=>{null==e||e.play()})))},t.navigateToAudiocallStart=function(){const e=document.querySelector(".audiocall-result"),t=document.querySelector(".audiocall-welcome");e.classList.add("hidden"),null==t||t.classList.remove("hidden")},t.navigateBackToDictionary=function(){const e=document.querySelector(".dictionary"),t=document.querySelector(".footer"),n=document.querySelector(".dictionary-footer"),i=document.querySelector(".audiocall"),o=document.querySelector(".audiocall-result");null==e||e.classList.remove("hidden"),null==t||t.classList.remove("hidden"),null==n||n.classList.remove("footer-hidden"),null==i||i.classList.add("hidden"),o.classList.add("hidden")}},161:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(452),r=n(323),s=n(419),a=n(129);t.default=function(){const e=document.getElementById("log-in"),t=document.getElementById("signIn-section"),n=document.querySelector("#registration-section"),d=document.querySelector("#signIn-section span"),l=document.querySelector("#registration-section span"),c=document.getElementById("registration-link"),u=document.querySelector(".form-signIn"),h=document.querySelector(".form-reg"),g=document.querySelector(".dictionary-levels button:last-child");function m(){t.classList.remove("hidden")}function f(){e.classList.remove("signIn-logo"),g.classList.add("hidden"),r.store.isAuthorized=!1,(0,s.renderDictionary)(),localStorage.clear(),e.removeEventListener("click",f),e.addEventListener("click",m)}function p(){t.classList.add("hidden"),u.reset()}function v(){n.classList.add("hidden"),u.reset(),h.reset()}function y(){e.removeEventListener("click",m),e.addEventListener("click",f),e.classList.add("signIn-logo"),g.classList.remove("hidden"),r.store.isAuthorized=!0}e.addEventListener("click",m),c.addEventListener("click",(()=>{t.classList.add("hidden"),n.classList.remove("hidden")})),d.addEventListener("click",p),l.addEventListener("click",v);const w=document.getElementById("reg-name"),L=document.getElementById("reg-email"),S=document.getElementById("reg-password");h.addEventListener("submit",(function(){return i(this,void 0,void 0,(function*(){try{const e=S.value,t=yield(0,o.createUser)({name:w.value,email:L.value,password:e}),n=yield(0,o.signIn)({email:t.email,password:e});y(),(0,s.renderDictionary)(),localStorage.setItem("userId",n.userId),localStorage.setItem("token",n.token),localStorage.setItem("refreshToken",n.refreshToken),v(),(0,o.putUserStatistics)(localStorage.getItem("userId")||"",r.store.statisticsNew,localStorage.getItem("token")||"")}catch(e){console.log(e)}}))}));const _=document.getElementById("signIn-email"),A=document.getElementById("signIn-password");u.addEventListener("submit",(function(){return i(this,void 0,void 0,(function*(){try{const e=yield(0,o.signIn)({email:_.value,password:A.value});y(),(0,s.renderDictionary)(),localStorage.setItem("userId",e.userId),localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),p(),(0,a.getUserStatisticsFn)()}catch(e){console.log(e)}}))})),window.addEventListener("load",(()=>{localStorage.getItem("token")&&(y(),(0,s.renderDictionary)())}))}},255:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(419),r=n(323);t.default=function(){const e=document.querySelector(".dictionary-levels button:last-child"),t=document.querySelector(".dictionary__row"),n=document.querySelector(".dictionary-controls"),s=document.getElementById("current-page");e.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){r.store.isComplicatedWordPage=!0,t.style.backgroundColor="transparent",n.classList.add("hidden"),s.style.color="#ffffff",yield(0,o.renderDictionary)(!0)}))))}},86:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(323),r=n(452),s=n(939);t.default=function(){return i(this,void 0,void 0,(function*(){const e=document.querySelector(".dictionary__row"),t=document.querySelector(".dictionary-levels button:last-child"),n=document.getElementById("current-page"),i=`wordsPerPage=20&filter=%7B%22%24and%22%3A%5B%7B%22%24or%22%3A%5B%7B%22userWord.difficulty%22%3A%22hard%22%7D%2C%7B%22userWord.difficulty%22%3A%22easy%22%7D%5D%7D%2C%20%7B%22page%22%3A${o.store.currentPage}%7D%5D%7D`,a=`${s.ELinks.users}/${localStorage.getItem("userId")}/aggregatedWords?group=${o.store.currentLevel}&${i}`;(yield(0,r.getAggregatedWords)(localStorage.getItem("token")||"",a))[0].paginatedResults.length>19&&!t.classList.contains("hidden")?(e.style.backgroundColor="rgba(0, 255, 0, .4)",n.style.color="rgba(0, 255, 0, .4)"):(e.style.backgroundColor="transparent",n.style.color="#ffffff")}))}},979:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(323),o=n(939),r=n(419);t.default=function(){const e=document.querySelector(".promo-btn"),t=document.querySelector(".promo"),n=document.querySelector(".dictionary"),s=document.querySelector(".main-page"),a=document.querySelector(".header__logo_link"),d=document.querySelectorAll(".header__nav_list-item"),l=document.querySelector(".dictionary-footer"),c=document.querySelector(".footer"),u=document.querySelector(".statistics"),h=document.querySelector(".developers"),g=document.querySelectorAll(".game"),m=document.querySelector(".audiocall"),f=document.querySelector(".sprint");function p(e){if(""===e)d.forEach((e=>null==e?void 0:e.classList.remove("current-page")));else{d.forEach((e=>null==e?void 0:e.classList.remove("current-page")));const t=document.querySelector(`.header__nav_list-item[data-link=${e}]`);null==t||t.classList.add("current-page")}}function v(){null==t||t.classList.add("hidden"),null==u||u.classList.add("hidden"),null==h||h.classList.add("hidden"),null==s||s.classList.add("dictionary-page"),null==a||a.classList.add("dictionary-page"),null==m||m.classList.add("hidden"),null==f||f.classList.add("hidden"),null==n||n.classList.add("hidden"),null==l||l.classList.add("footer-hidden"),null==c||c.classList.add("hidden")}const y=()=>{v(),p(o.MenuLinks.dictionary),document.querySelectorAll(".words-level").forEach((e=>e.classList.remove("active"))),document.querySelector(".words-level:first-child").classList.add("active"),i.store.currentLevel="0",i.store.currentPage="0",null==n||n.classList.remove("hidden"),null==c||c.classList.remove("hidden"),null==l||l.classList.remove("footer-hidden"),(0,r.renderDictionary)()},w=()=>{const e=document.querySelector(".audiocall-welcome"),t=document.querySelector(".audiocall-question");v(),p(o.MenuLinks.games),null==m||m.classList.remove("hidden"),null==t||t.classList.add("hidden"),null==e||e.classList.remove("hidden")},L=()=>{v(),p(o.MenuLinks.games),null==f||f.classList.remove("hidden")},S=e=>{const t=e.target.dataset.link;t===o.MenuLinks.dictionary&&y(),t===o.MenuLinks.audiocall&&w(),t===o.MenuLinks.statistics&&(v(),p(o.MenuLinks.statistics),null==c||c.classList.remove("hidden"),null==u||u.classList.remove("hidden")),t===o.MenuLinks.sprint&&L(),t===o.MenuLinks.developers&&(v(),p(o.MenuLinks.developers),null==c||c.classList.remove("hidden"),null==h||h.classList.remove("hidden"))},_=e=>{const t=e.target.dataset.game;t===o.GameNames.audiocall&&w(),t===o.GameNames.sprint&&L()};e.addEventListener("click",y),null==a||a.addEventListener("click",(()=>{v(),p(""),null==s||s.classList.remove("dictionary-page"),null==a||a.classList.remove("dictionary-page"),null==t||t.classList.remove("hidden"),null==c||c.classList.remove("hidden")})),d.forEach((e=>e.addEventListener("click",S))),g.forEach((e=>e.addEventListener("click",_)))}},419:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderDictionary=void 0;const r=n(323),s=o(n(898)),a=o(n(86));t.renderDictionary=(e=!1)=>i(void 0,void 0,void 0,(function*(){r.store.isComplicatedWordPage=e;const t=document.querySelector(".dictionary__row"),n=document.getElementById("current-page");t.style.backgroundColor="transparent",n.style.color="#ffffff";const i=new s.default(t,e,r.store.currentLevel,r.store.currentPage);yield i.getData(),i.render();const o=document.querySelector(".dictionary-footer"),d=document.querySelector(".dictionary-levels button:last-child");document.querySelector(".promo").classList.contains("hidden")&&!d.classList.contains("hidden")&&o.classList.remove("hidden"),e&&o.classList.add("hidden"),e||d.classList.contains("hidden")||(yield(0,a.default)()),console.log("store.isComplicatedWordPage",r.store.isComplicatedWordPage)}))},452:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAggregatedWords=t.getAggregatedWordById=t.getUserSettings=t.putUserSettings=t.getUserStatistics=t.putUserStatistics=t.deleteUserWord=t.updateUserWord=t.getUserWordById=t.getUserWords=t.createUserWord=t.getTokens=t.deleteUser=t.updateUser=t.getUserById=t.signIn=t.createUser=t.getWordById=t.getWords=void 0;const o=n(939);function r(e,t){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/tokens`,{headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()}))}t.getWords=function(e="0",t="0"){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.words}?group=${e}&page=${t}`,{headers:{Accept:"application/json"}})).json()}))},t.getWordById=function(e){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.words}/${e}`)).json()}))},t.createUser=function(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(o.ELinks.users,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return 417===t.status&&alert("user with this e-mail exists"),t.json()}))},t.signIn=function(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(o.ELinks.signIn,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return 403===t.status?alert("Incorrect e-mail or password"):404===t.status&&alert(`Couldn't find a(an) user with: ${e.email}`),t.json()}))},t.getUserById=function(e,t){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}`,{headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()}))},t.updateUser=function(e,t,n){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)})).json()}))},t.deleteUser=function(e,t){return i(this,void 0,void 0,(function*(){yield fetch(`${o.ELinks.users}/${e}`,{method:"DELETE",headers:{Accept:"*/*",Authorization:`Bearer ${t}`}})}))},t.getTokens=r,t.createUserWord=function(e,t,n,r){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/words/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)})).json()}))},t.getUserWords=function(e,t){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/words`,{headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()}))},t.getUserWordById=function(e,t,n){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/words/${t}`,{headers:{Accept:"application/json",Authorization:`Bearer ${n}`}})).json()}))},t.updateUserWord=function(e,t,n,r){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/words/${t}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)})).json()}))},t.deleteUserWord=function(e,t,n){return i(this,void 0,void 0,(function*(){yield fetch(`${o.ELinks.users}/${e}/words/${t}`,{method:"DELETE",headers:{Accept:"*/*",Authorization:`Bearer ${n}`}})}))},t.putUserStatistics=function(e,t,n){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/statistics`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)})).json()}))},t.getUserStatistics=function(e,t){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/statistics`,{headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()}))},t.putUserSettings=function(e,t,n){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/settings`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)})).json()}))},t.getUserSettings=function(e,t){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/settings`,{headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()}))},t.getAggregatedWordById=function(e,t,n){return i(this,void 0,void 0,(function*(){return(yield fetch(`${o.ELinks.users}/${e}/aggregatedWords/${t}`,{headers:{Accept:"application/json",Authorization:`Bearer ${n}`}})).json()}))},t.getAggregatedWords=function(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(t,{headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});if(401===n.status&&localStorage.getItem("token")){const e=yield r(localStorage.getItem("userId")||"",localStorage.getItem("refreshToken")||"");localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),alert("Пожалуйста, сделайте повторный вход либо обновите страницу")}return n.json()}))}},558:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWordsForGame=t.generateQuestion=t.closeResults=void 0;const o=n(452),r=n(939),s=n(323),a=n(8),d=n(129),l=document.querySelector(".sprint"),c=document.querySelector(".sprint-word"),u=document.querySelector(".sprint-word-translation"),h=document.querySelector(".sprint-word-wrong"),g=document.querySelector(".sprint-word-right"),m=document.querySelector(".sprint-word-result"),f=document.querySelector(".sprint-timer"),p=document.querySelector(".sprint-start"),v=document.querySelector(".sprint-game"),y=document.querySelector(".sprint-result"),w=document.getElementById("count-sprint-result-mistakes"),L=document.getElementById("count-sprint-result-correct"),S=document.getElementById("sprint-result-mistakes"),_=document.getElementById("sprint-result-correct"),A=document.getElementById("close-sprint"),k=document.getElementById("new-sprint"),I=document.querySelector(".dictionary"),E=document.querySelector(".footer"),q=document.querySelector(".dictionary-footer"),M=document.querySelector(".sprint-result-verdict"),W=document.querySelector(".sprint-game-info__level"),b=document.querySelector(".sprint-game-info__page"),T=document.querySelector(".sprint-game-info__count-words"),$=document.querySelector(".sprint-game-info__current-number");let B,C,P,H,x,D,j,U,O="";function z(){p.classList.remove("hidden"),v.classList.add("hidden"),y.classList.add("hidden")}function G(e,t){const n=document.createElement("div");n.classList.add("result-word"),n.innerHTML=`\n<div></div>\n<div>${t.word}</div>\n<div>-</div>\n<div>${t.wordTranslate}</div>\n  `,e===S?S.append(n):_.append(n),n.addEventListener("click",(()=>{new Audio(`${r.ELinks.link}/${t.audio}`).play()}))}function R(){new Audio("./assets/sounds/roundEnd.mp3").play(),v.classList.add("hidden"),y.classList.remove("hidden"),w.innerHTML=H.length.toString(),L.innerHTML=x.length.toString(),H.forEach((e=>G(S,e))),x.forEach((e=>G(_,e))),M.innerHTML=function(){const e=x.length+H.length,t=x.length,n=Math.round(t/e*100);return n===r.ResultGrade.excellent?"Превосходный результат, поздравляем!":n<r.ResultGrade.excellent&&n>r.ResultGrade.good?"Хороший результат, поздравляем!":n<r.ResultGrade.good&&n>r.ResultGrade.bad?"Неплохо, однако возможно лучше :)!":"Не отчаивайтесь, все обязательно получится!"}(),(0,d.updateBestSeriesFn)("sprint",j)}function F(){c.innerHTML=P[C].word,B=P[C];const e=P.slice();e.splice(C,1);const t=e[Math.floor(Math.random()*e.length)].wordTranslate;O=P[C].wordTranslate;const n=[O,t];u.innerHTML=n[Math.round(Math.random())]}function N(){C<P.length-1?(C++,$.innerHTML=""+(+C+1),F()):R(),h.disabled=!1,g.disabled=!1}function V(e){h.disabled=!0,g.disabled=!0,m.classList.remove("visibility"),u.innerHTML===O&&"right"===e||u.innerHTML!==O&&"wrong"===e?(new Audio("./assets/sounds/correct.mp3").play(),m.classList.add("right-answer"),x.push(B),setTimeout((()=>{m.classList.add("visibility"),m.classList.remove("right-answer"),N()}),600),s.store.isAuthorized&&((0,a.updateGameStats)("sprint",!0,B.id||B._id),(0,d.updateUserStatisticsFn)("sprint",!0),U++)):(new Audio("./assets/sounds/wrong1.wav").play(),m.classList.add("wrong-answer"),H.push(B),setTimeout((()=>{m.classList.add("visibility"),m.classList.remove("wrong-answer"),N()}),600),s.store.isAuthorized&&((0,a.updateGameStats)("sprint",!1,B.id||B._id),(0,d.updateUserStatisticsFn)("sprint",!1),U>j&&(j=U),U=0))}function Q(e){switch(e){case"0":return"A1.";case"1":return"A2.";case"2":return"B1.";case"3":return"B2.";case"4":return"C1.";case"5":return"C2.";default:return""}}t.closeResults=z,A.addEventListener("click",(()=>{l.classList.add("hidden"),I.classList.remove("hidden"),E.classList.remove("hidden"),q.classList.remove("footer-hidden"),z()})),k.addEventListener("click",(()=>{z()})),t.generateQuestion=F,h.addEventListener("click",(()=>{V("wrong")})),g.addEventListener("click",(()=>{V("right")})),document.addEventListener("keyup",(function(e){!1!==h.disabled||v.classList.contains("hidden")||("ArrowRight"===e.code?V("right"):"ArrowLeft"===e.code&&V("wrong"))})),t.getWordsForGame=function(e,t){return i(this,void 0,void 0,(function*(){C=0,clearInterval(D),c.innerHTML="",u.innerHTML="",_.innerHTML="",S.innerHTML="",f.innerHTML="",M.innerHTML="",W.innerHTML="",b.innerHTML="",T.innerHTML="",$.innerHTML="1",j=0,U=0;const n=String(Math.floor(30*Math.random()));let i;if(s.store.isAuthorized)if(t)if(s.store.isComplicatedWordPage){const e="aggregatedWords?wordsPerPage=3600&filter=%7B%22userWord.difficulty%22%3A%22hard%22%7D";i=`${r.ELinks.users}/${localStorage.getItem("userId")}/${e}`,W.innerHTML="Cложные слова.",b.innerHTML="Cложные слова.",P=(yield(0,o.getAggregatedWords)(localStorage.getItem("token")||"",i))[0].paginatedResults,T.innerHTML=P.length.toString()+"."}else{const e=`wordsPerPage=20&filter=%7B%22%24and%22%3A%5B%7B%22%24or%22%3A%5B%7B%22userWord.difficulty%22%3A%22empty%22%7D%2C%20%7B%22userWord.difficulty%22%3A%22hard%22%7D%2C%20%7B%22userWord%22%3Anull%7D%5D%7D%2C%20%7B%22page%22%3A${s.store.currentPage}%7D%5D%7D`;i=`${r.ELinks.users}/${localStorage.getItem("userId")}/aggregatedWords?group=${s.store.currentLevel}&${e}`,W.innerHTML=Q(s.store.currentLevel),b.innerHTML=+s.store.currentPage+1+".",P=(yield(0,o.getAggregatedWords)(localStorage.getItem("token")||"",i))[0].paginatedResults,T.innerHTML=P.length.toString()+"."}else P=yield(0,o.getWords)(e,n),W.innerHTML=Q(e),b.innerHTML=+n+1+".",T.innerHTML=P.length.toString()+".";else t?(W.innerHTML=Q(s.store.currentLevel),b.innerHTML=+s.store.currentPage+1+".",P=yield(0,o.getWords)(s.store.currentLevel,s.store.currentPage),T.innerHTML=P.length.toString()+"."):(W.innerHTML=Q(e),b.innerHTML=+n+1+".",P=yield(0,o.getWords)(e,n),T.innerHTML=P.length.toString()+".");x=[],H=[],P.length>1?(F(),function(){let e=60;f.innerHTML=e.toString(),D=setInterval((()=>{y.classList.contains("hidden")||clearInterval(D),e>0?(e--,f.innerHTML=e.toString()):(clearInterval(D),y.classList.contains("hidden")&&R()),l.classList.contains("hidden")&&clearInterval(D)}),600)}()):(alert("Недостаточно слов для игры"),z())}))}},634:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(712);t.default=function(){(0,i.sprintStart)()}},712:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sprintStart=void 0;const i=n(558),o=n(323);t.sprintStart=function(){const e=document.querySelectorAll(".sprint-level"),t=document.querySelector(".sprint-start"),n=document.querySelector(".sprint-game"),r=document.querySelector(".sprint-result"),s=document.querySelector(".sprint-start-btn"),a=document.querySelector(".game-menu_sprint"),d=document.querySelector(".game-sprint");a.addEventListener("click",(()=>{(0,i.closeResults)()})),d.addEventListener("click",(()=>{n.classList.remove("hidden"),t.classList.add("hidden"),r.classList.add("hidden"),(0,i.getWordsForGame)(o.store.currentLevel,!0)}));let l=String(Array.from(e).findIndex((e=>e.classList.contains("active"))));e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),l=String(Array.from(e).findIndex((e=>e.classList.contains("active"))))}))})),s.addEventListener("click",(()=>{t.classList.add("hidden"),n.classList.remove("hidden"),(0,i.getWordsForGame)(l,!1)}))}},129:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateBestSeriesFn=t.updateUserStatisticsFn=t.navigateStatistics=t.getUserStatisticsFn=void 0;const o=n(323),r=n(452),s=document.getElementById("statistics-btn"),a=document.getElementById("today-words"),d=document.getElementById("today-accuracy"),l=document.getElementById("today-audiocall-words"),c=document.getElementById("today-audiocall-accuracy"),u=document.getElementById("today-audiocall-in-a-row"),h=document.getElementById("today-sprint-words"),g=document.getElementById("today-sprint-accuracy"),m=document.getElementById("today-sprint-in-a-row");function f(){return i(this,void 0,void 0,(function*(){if(o.store.isAuthorized){const e=yield(0,r.getUserStatistics)(localStorage.getItem("userId")||"",localStorage.getItem("token")||"");e.optional&&(l.innerHTML=`${e.optional.games.audiocall.newWords}`,e.optional.games.audiocall.newWords<1?c.innerHTML="0":c.innerHTML=`${Math.round(e.optional.games.audiocall.right/e.optional.games.audiocall.newWords*100)}%`,u.innerHTML=`${e.optional.games.audiocall.bestSeries}`,h.innerHTML=`${e.optional.games.sprint.newWords}`,e.optional.games.sprint.newWords<1?g.innerHTML="0":g.innerHTML=`${Math.round(e.optional.games.sprint.right/e.optional.games.sprint.newWords*100)}%`,m.innerHTML=`${e.optional.games.sprint.bestSeries}`,a.innerHTML=`${e.optional.games.audiocall.newWords+e.optional.games.sprint.newWords}`,e.optional.games.audiocall.newWords+e.optional.games.sprint.newWords<1?d.innerHTML="0":d.innerHTML=`${Math.round((e.optional.games.audiocall.right+e.optional.games.sprint.right)/+a.innerHTML*100)}%`)}}))}function p(){const e=new Date;return JSON.stringify(e).slice(1,JSON.stringify(e).indexOf("T"))}t.getUserStatisticsFn=f,t.navigateStatistics=function(){return i(this,void 0,void 0,(function*(){s.addEventListener("click",(()=>{f()}))}))},t.updateUserStatisticsFn=function(e,t){var n;return i(this,void 0,void 0,(function*(){if(o.store.isAuthorized){const s=yield(0,r.getUserStatistics)(localStorage.getItem("userId")||"",localStorage.getItem("token")||"");if(i=(null===(n=s.optional)||void 0===n?void 0:n.date)||"",p()===i){if(s.learnedWords++,s.optional){"sprint"===e&&!0===t?(s.optional.games.sprint.right++,s.optional.games.sprint.newWords++):"sprint"===e&&!1===t?s.optional.games.sprint.newWords++:"audiocall"===e&&!0===t?(s.optional.games.audiocall.right++,s.optional.games.audiocall.newWords++):"audiocall"===e&&!1===t&&s.optional.games.audiocall.newWords++;const n={learnedWords:s.learnedWords,optional:s.optional};(0,r.putUserStatistics)(localStorage.getItem("userId")||"",n,localStorage.getItem("token")||"")}}else{const e=JSON.parse(JSON.stringify(o.store.statisticsNew)),t=p();e.learnedWords=s.learnedWords,e.optional.date=t,(0,r.putUserStatistics)(localStorage.getItem("userId")||"",e,localStorage.getItem("token")||"")}}var i}))},t.updateBestSeriesFn=function(e,t){return i(this,void 0,void 0,(function*(){if(o.store.isAuthorized){const n=yield(0,r.getUserStatistics)(localStorage.getItem("userId")||"",localStorage.getItem("token")||"");if(n.optional){"sprint"===e?t>n.optional.games.sprint.bestSeries&&(n.optional.games.sprint.bestSeries=t):"audiocall"===e&&t>n.optional.games.audiocall.bestSeries&&(n.optional.games.audiocall.bestSeries=t);const i={learnedWords:n.learnedWords,optional:n.optional};(0,r.putUserStatistics)(localStorage.getItem("userId")||"",i,localStorage.getItem("token")||"")}}}))}},8:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateGameStats=t.getWordStatisticsInGame=t.navigateWordStatistics=void 0;const o=n(452),r=n(323),s=document.getElementById("audiocall-right"),a=document.getElementById("audiocall-wrong"),d=document.getElementById("sprint-right"),l=document.getElementById("sprint-wrong");function c(e){return i(this,void 0,void 0,(function*(){const t=(yield(0,o.getAggregatedWordById)(localStorage.getItem("userId")||"",e,localStorage.getItem("token")||""))[0].userWord;if(t)return t}))}t.navigateWordStatistics=function(){const e=document.querySelector(".word-statistics-in-games");document.querySelector(".word-statistics-container span").addEventListener("click",(()=>{e.classList.add("hidden"),s.innerHTML="0",a.innerHTML="0",d.innerHTML="0",l.innerHTML="0"}))},t.getWordStatisticsInGame=c,t.updateGameStats=function(e,t,n){return i(this,void 0,void 0,(function*(){const i=yield c(n);if(i){const r=i.difficulty;"sprint"===e&&!0===t?i.optional.games.sprint.right++:"sprint"===e&&!1===t?i.optional.games.sprint.wrong++:"audiocall"===e&&!0===t?i.optional.games.audiocall.right++:"audiocall"===e&&!1===t&&i.optional.games.audiocall.wrong++,yield(0,o.updateUserWord)(localStorage.getItem("userId")||"",n,{difficulty:r,optional:i.optional},localStorage.getItem("token")||"")}else{const i=JSON.parse(JSON.stringify(r.store.optional));"sprint"===e&&!0===t?i.games.sprint.right++:"sprint"===e&&!1===t?i.games.sprint.wrong++:"audiocall"===e&&!0===t?i.games.audiocall.right++:"audiocall"===e&&!1===t&&i.games.audiocall.wrong++,yield(0,o.createUserWord)(localStorage.getItem("userId")||"",n,{difficulty:"empty",optional:i},localStorage.getItem("token")||"")}}))}},323:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0,t.store={currentPage:"0",currentLevel:"0",isAuthorized:!1,audiocallCurrentLevel:"0",isComplicatedWordPage:!1,optional:{games:{sprint:{right:0,wrong:0},audiocall:{right:0,wrong:0}}},statisticsNew:{learnedWords:0,optional:{date:" ",games:{audiocall:{bestSeries:0,right:0,newWords:0},sprint:{bestSeries:0,right:0,newWords:0}}}}}},939:(e,t)=>{var n,i,o,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CallAudiogameFrom=t.ResultGrade=t.MenuLinks=t.GameNames=t.WordDifficulty=t.ELinks=void 0,(a=t.ELinks||(t.ELinks={})).link="https://bukman-rs-lang.herokuapp.com",a.words="https://bukman-rs-lang.herokuapp.com/words",a.users="https://bukman-rs-lang.herokuapp.com/users",a.signIn="https://bukman-rs-lang.herokuapp.com/signin",(s=t.WordDifficulty||(t.WordDifficulty={})).hard="hard",s.easy="easy",s.statistics="statistics",s.empty="empty",(r=t.GameNames||(t.GameNames={})).sprint="sprint",r.audiocall="audiocall",(o=t.MenuLinks||(t.MenuLinks={})).dictionary="dictionary",o.sprint="sprint",o.audiocall="audiocall",o.statistics="statistics",o.developers="developers",o.games="games",(i=t.ResultGrade||(t.ResultGrade={}))[i.excellent=100]="excellent",i[i.good=70]="good",i[i.bad=30]="bad",(n=t.CallAudiogameFrom||(t.CallAudiogameFrom={})).menu="menu",n.dictionary="dictionary"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(303)})();